<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>نظام إدارة جدول امتحانات الدبلوم العام | مدرسة خولة بنت حكيم للتعليم الأساسي</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic:wght@400;500;600;700;800&family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
  <link rel="icon" type="image/x-icon" href="https://d.top4top.io/p_36520q11g1.png">

  <style>
    :root {
      --primary-green: #1a7f5c; /* أخضر وزارة التربية والتعليم */
      --secondary-green: #2d9b8c; /* أخضر فاتح */
      --accent-blue: #2c5aa0; /* أزرق ملكي */
      --dark-blue: #1c3d5a; /* أزرق بحري عميق */
      --gold-color: #e6b422; /* ذهبي دافئ */
      --light-green: #e8f5e9; /* أخضر فاتح للخلفية */
      --medium-green: #4caf50; /* أخضر متوسط */
      --text-color: #2d3748;
      --text-light: #4a5568;
      --white: #ffffff;
      --off-white: #f9fafb;
      --shadow: 0 10px 35px rgba(0, 0, 0, 0.08);
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --border-radius: 18px;
      --border-radius-lg: 26px;
      --gradient-primary: linear-gradient(135deg, #1a7f5c 0%, #2d9b8c 100%);
      --gradient-secondary: linear-gradient(135deg, #2c5aa0 0%, #1c3d5a 100%);
      --gradient-accent: linear-gradient(135deg, #e6b422 0%, #d4a017 100%);
      --gradient-green: linear-gradient(135deg, #1a7f5c 0%, #2d9b8c 100%);
      --gradient-blue: linear-gradient(135deg, #2c5aa0 0%, #1c3d5a 100%);
      --gradient-header: linear-gradient(135deg, rgba(26, 127, 92, 0.95) 0%, rgba(45, 155, 140, 0.95) 100%);
      --gradient-light: linear-gradient(135deg, #f1f8e9 0%, #e8f5e9 100%);
      --glass-bg: rgba(255, 255, 255, 0.18);
      --glass-border: rgba(255, 255, 255, 0.28);
    }

    * { 
      box-sizing: border-box; 
      margin: 0; 
      padding: 0; 
      -webkit-tap-highlight-color: transparent; 
    }
    
    html { 
      scroll-behavior: smooth; 
      overflow-x: hidden; 
    }
    
    body {
      font-family: 'Tajawal', 'Noto Naskh Arabic', sans-serif;
      background: linear-gradient(135deg, #f1f8e9 0%, #e8f5e9 100%);
      color: var(--text-color);
      line-height: 1.7;
      overflow-x: hidden;
      min-height: 100vh;
      width: 100%;
      max-width: 100%;
      background-image: 
        radial-gradient(circle at 20% 80%, rgba(76, 175, 80, 0.05) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(26, 127, 92, 0.05) 0%, transparent 50%);
    }

    .container { 
      max-width: 1400px; 
      margin: 0 auto; 
      padding: 0 20px; 
      width: 100%; 
    }

    /* شعار المدرسة في الهيدر */
    .school-logo-header {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 25px;
      position: relative;
      animation: float 6s ease-in-out infinite;
    }
    
    .logo-container {
      display: flex;
      align-items: center;
      gap: 25px;
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(25px);
      -webkit-backdrop-filter: blur(25px);
      padding: 20px 35px;
      border-radius: var(--border-radius-lg);
      border: 2px solid rgba(255, 255, 255, 0.35);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
      position: relative;
      overflow: hidden;
      transition: var(--transition);
      max-width: 900px;
      width: 100%;
    }
    
    .logo-container::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 5px;
      background: linear-gradient(90deg, var(--gold-color), var(--accent-blue), var(--primary-green));
      z-index: 1;
    }
    
    .logo-container:hover {
      transform: translateY(-8px);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
    }
    
    .logo-img {
      width: 110px;
      height: 110px;
      border-radius: 50%;
      border: 4px solid var(--white);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.25);
      object-fit: cover;
      transition: var(--transition);
      background: white;
    }
    
    .logo-img:hover {
      transform: scale(1.08) rotate(5deg);
    }
    
    .logo-text {
      display: flex;
      flex-direction: column;
      gap: 12px;
      flex: 1;
    }
    
    .logo-main-title {
      font-size: 1.8rem;
      font-weight: 900;
      color: var(--white);
      text-shadow: 0 2px 12px rgba(0, 0, 0, 0.4);
      line-height: 1.3;
      margin-bottom: 5px;
    }
    
    .logo-subtitle {
      font-size: 1.5rem;
      font-weight: 800;
      color: var(--gold-color);
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.35);
      line-height: 1.3;
    }
    
    .logo-details {
      font-size: 1.2rem;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.9);
      line-height: 1.4;
      margin-top: 8px;
    }

    header {
      background: var(--gradient-header), url('https://d.top4top.io/p_36520q11g1.png') center/cover no-repeat;
      color: var(--white);
      padding: 45px 0 35px;
      text-align: center;
      border-radius: 0 0 var(--border-radius-lg) var(--border-radius-lg);
      margin-bottom: 45px;
      position: relative;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
      overflow: hidden;
    }
    
    header::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.08)"/></svg>');
      background-size: cover;
      pointer-events: none;
    }
    
    header::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 10px;
      background: linear-gradient(90deg, var(--gold-color), var(--accent-blue));
    }

    .header-content { 
      padding: 0 20px; 
      position: relative;
      z-index: 2;
    }
    
    h1 {
      font-size: clamp(1.9rem, 5vw, 3rem);
      font-weight: 900;
      line-height: 1.3;
      margin-bottom: 20px;
      background: linear-gradient(135deg, #fff 0%, #f0f0f0 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 4px 18px rgba(0, 0, 0, 0.25);
      padding: 0 10px;
    }

    .header-subtitle {
      font-size: clamp(1.3rem, 3.5vw, 2rem);
      color: var(--gold-color);
      font-weight: 800;
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
      margin: 20px 0 25px;
      position: relative;
      display: inline-block;
      padding-bottom: 12px;
    }
    
    .header-subtitle::after {
      content: "";
      position: absolute;
      bottom: 0;
      right: 0;
      width: 70%;
      height: 4px;
      background: linear-gradient(90deg, transparent, var(--gold-color));
      border-radius: 2px;
    }

    .header-meta {
      display: inline-block;
      font-size: clamp(1.1rem, 2.4vw, 1.3rem);
      font-weight: 700;
      padding: 16px 32px;
      border-radius: 999px;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(25px);
      -webkit-backdrop-filter: blur(25px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      max-width: 95%;
      margin: 25px auto;
      transition: var(--transition);
    }
    
    .header-meta:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-5px);
    }

    .school-info {
      display: flex;
      justify-content: center;
      gap: 30px;
      flex-wrap: wrap;
      margin: 25px auto 0;
      max-width: 1000px;
      padding: 25px;
      border-radius: var(--border-radius);
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(25px);
      -webkit-backdrop-filter: blur(25px);
      box-shadow: 0 15px 35px rgba(0,0,0,0.2);
    }
    
    .info-item {
      display: flex;
      align-items: center;
      gap: 15px;
      font-weight: 700;
      font-size: 1.15rem;
      padding: 12px 22px;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 14px;
      transition: var(--transition);
    }
    
    .info-item:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: translateY(-5px);
    }
    
    .info-item i { 
      color: var(--gold-color); 
      font-size: 1.4rem; 
    }

    .header-time-date {
      display: flex;
      justify-content: center;
      gap: 30px;
      flex-wrap: wrap;
      margin: 30px auto 0;
      max-width: 1000px;
      padding: 25px 30px;
      border-radius: var(--border-radius);
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(25px);
      -webkit-backdrop-filter: blur(25px);
      box-shadow: 0 15px 35px rgba(0,0,0,0.2);
    }
    
    .header-time, .header-date { 
      display: flex; 
      align-items: center; 
      gap: 15px; 
      font-weight: 800; 
      font-size: 1.3rem;
      padding: 12px 25px;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 14px;
      transition: var(--transition);
    }
    
    .header-time:hover, .header-date:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: translateY(-5px);
    }
    
    .header-time i, .header-date i { 
      color: var(--gold-color); 
      font-size: 1.6rem; 
    }

    .main-nav {
      display: flex;
      justify-content: center;
      gap: 25px;
      margin-top: 30px;
      flex-wrap: wrap;
      padding: 0 20px;
    }
    
    .nav-btn {
      color: var(--white);
      border: 1px solid rgba(255,255,255,0.35);
      padding: 20px 30px;
      border-radius: 18px;
      font-size: 1.2rem;
      font-weight: 800;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      transition: var(--transition);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      min-height: 70px;
      width: min(400px, 100%);
      position: relative;
      overflow: hidden;
      letter-spacing: 0.5px;
    }
    
    .nav-btn::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.25), transparent);
      transition: 0.6s;
    }
    
    .nav-btn:hover::before {
      left: 100%;
    }
    
    .nav-btn:hover { 
      transform: translateY(-8px); 
      box-shadow: 0 22px 45px rgba(0,0,0,0.3); 
    }
    
    /* زر تعليمات الاختبار - أزرق */
    .instructions-btn { 
      background: var(--gradient-blue); 
      border: 2px solid rgba(255, 255, 255, 0.4);
    }
    
    /* زر بيانات اليوم - أخضر */
    .dropdown-btn { 
      background: var(--gradient-green); 
      border: 2px solid rgba(255, 255, 255, 0.4);
    }

    .exam-table-container {
      background: var(--white);
      border-radius: var(--border-radius-lg);
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.12);
      padding: 30px;
      border: 1px solid rgba(0,0,0,0.1);
      width: 100%;
      max-width: 100%;
      margin-bottom: 70px;
      position: relative;
      overflow: hidden;
      background: linear-gradient(135deg, #ffffff 0%, #f8fdf8 100%);
    }
    
    .exam-table-container::before {
      content: "";
      position: absolute;
      top: 0;
      right: 0;
      width: 10px;
      height: 100%;
      background: var(--gradient-green);
    }

    .exam-table { 
      width: 100%; 
      border-collapse: separate; 
      border-spacing: 0; 
      min-width: 850px; 
    }
    
    .exam-table th {
      background: var(--gradient-green);
      color: var(--white);
      padding: 22px 18px;
      text-align: center;
      font-weight: 900;
      position: sticky;
      top: 0;
      z-index: 10;
      white-space: nowrap;
      font-size: 1.2rem;
      letter-spacing: 0.5px;
      border-bottom: 4px solid var(--gold-color);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    }
    
    .exam-table td { 
      padding: 20px 18px; 
      text-align: center; 
      border-bottom: 1px solid rgba(0,0,0,0.1); 
      font-size: 1.1rem;
      transition: var(--transition);
    }
    
    .exam-table tr:hover td {
      background: rgba(26, 127, 92, 0.08);
    }

    .countdown {
      font-weight: 900;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      font-size: 1.15rem;
      padding: 16px 24px;
      border-radius: 999px;
      min-width: 280px;
      border: 3px solid rgba(0,0,0,0.1);
      transition: var(--transition);
    }
    
    .countdown:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.12);
    }
    
    .countdown.upcoming { 
      background: rgba(45, 155, 140, 0.18); 
      color: var(--secondary-green); 
      border-color: rgba(45, 155, 140, 0.35); 
    }
    
    .countdown.active { 
      background: rgba(230, 180, 34, 0.18); 
      color: #b8941f; 
      border-color: rgba(230, 180, 34, 0.35); 
      animation: pulse 2s infinite; 
    }
    
    .countdown.finished { 
      background: rgba(100,116,139,0.15); 
      color: #64748b; 
      border-color: rgba(100,116,139,0.2); 
    }

    .status-dot {
      width: 14px;
      height: 14px;
      border-radius: 999px;
      display: inline-block;
      box-shadow: 0 0 0 5px rgba(0,0,0,0.06);
      transition: var(--transition);
    }
    
    .dot-upcoming { background: var(--secondary-green); }
    .dot-active { background: #d4a017; }
    .dot-finished { background: #94a3b8; }

    .holiday { 
      background: rgba(230, 180, 34, 0.1); 
      color: #b8941f; 
    }
    
    .holiday td { 
      font-weight: 900; 
      font-size: 1.25rem;
    }

    .exam-active-row { 
      background: rgba(230, 180, 34, 0.1) !important; 
      border-right: 5px solid #d4a017;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(230, 180, 34, 0.35); }
      70% { box-shadow: 0 0 0 15px rgba(230, 180, 34, 0); }
      100% { box-shadow: 0 0 0 0 rgba(230, 180, 34, 0); }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-12px); }
    }

    footer {
      text-align: center;
      padding: 45px 25px;
      background: var(--gradient-header), url('https://d.top4top.io/p_36520q11g1.png') center/cover no-repeat;
      color: var(--white);
      border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
      box-shadow: 0 -15px 45px rgba(0,0,0,0.18);
      position: relative;
      overflow: hidden;
    }
    
    footer::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.12);
      z-index: 1;
    }
    
    footer > * {
      position: relative;
      z-index: 2;
    }
    
    footer strong { 
      color: var(--gold-color); 
    }
    
    footer p {
      margin-bottom: 18px;
      font-size: 1.15rem;
      line-height: 1.6;
    }

    .whatsapp-link {
      margin-top: 25px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      color: var(--white);
      text-decoration: none;
      font-weight: 900;
      padding: 18px 32px;
      border-radius: 999px;
      border: 2px solid rgba(255,255,255,0.35);
      background: rgba(255,255,255,0.25);
      width: min(450px, 100%);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      transition: var(--transition);
      font-size: 1.15rem;
    }
    
    .whatsapp-link:hover {
      background: rgba(255, 255, 255, 0.35);
      transform: translateY(-6px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
    }
    
    .whatsapp-icon { 
      color: #25D366; 
      font-size: 2rem; 
    }

    /* ✅ الهاتف: بطاقات إبداعية وواضحة */
    @media (max-width: 768px) {
      .school-logo-header {
        margin-bottom: 20px;
      }
      
      .logo-container {
        flex-direction: column;
        gap: 20px;
        padding: 25px 20px;
        text-align: center;
      }
      
      .logo-main-title {
        font-size: 1.5rem;
      }
      
      .logo-subtitle {
        font-size: 1.3rem;
      }
      
      .logo-details {
        font-size: 1.1rem;
      }
      
      .logo-img {
        width: 100px;
        height: 100px;
      }
      
      .exam-table-container { 
        padding: 20px 15px; 
        margin-bottom: 50px;
      }
      
      .exam-table { 
        min-width: 0 !important; 
        width: 100% !important; 
        display: block; 
      }
      
      .exam-table thead { 
        display: none; 
      }
      
      .exam-table tbody { 
        display: block; 
        width: 100%; 
      }

      .exam-table tr {
        display: block;
        position: relative;
        background: #fff;
        border-radius: 22px;
        overflow: hidden;
        margin: 0 0 25px 0;
        border: 1px solid rgba(0,0,0,0.1);
        box-shadow: 0 18px 40px rgba(0,0,0,0.12);
        transform: translateZ(0);
        transition: var(--transition);
      }
      
      .exam-table tr:hover {
        transform: translateY(-6px);
        box-shadow: 0 25px 50px rgba(0,0,0,0.18);
      }

      /* شريط علوي يميز اليوم */
      .exam-table tr::before {
        content: "";
        position: absolute;
        inset: 0 0 auto 0;
        height: 10px;
        background: var(--gradient-green);
      }

      /* شارة حالة كبيرة */
      .badge {
        position: absolute;
        top: 18px;
        left: 18px;
        padding: 10px 20px;
        border-radius: 999px;
        font-weight: 900;
        font-size: 1.1rem;
        border: 2px solid rgba(255,255,255,0.35);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        z-index: 2;
      }
      
      .badge.upcoming { 
        background: rgba(45, 155, 140, 0.3); 
        color: var(--secondary-green); 
      }
      
      .badge.active { 
        background: rgba(230, 180, 34, 0.3); 
        color: #b8941f; 
      }
      
      .badge.finished { 
        background: rgba(100,116,139,0.25); 
        color: #64748b; 
      }

      .exam-table tr.holiday::before { 
        background: linear-gradient(135deg, #e6b422 0%, #d4a017 100%); 
      }
      
      .exam-table tr.holiday .badge { 
        display: none; 
      }

      .exam-table tr.exam-finished::before { 
        background: linear-gradient(135deg, #64748b 0%, #94a3b8 100%); 
      }
      
      .exam-table tr.exam-upcoming::before { 
        background: var(--gradient-green); 
      }
      
      .exam-table tr.exam-active::before { 
        background: linear-gradient(135deg, #e6b422 0%, #d4a017 100%); 
      }

      .exam-table td {
        display: grid;
        grid-template-columns: 130px 1fr;
        gap: 18px;
        text-align: right !important;
        width: 100%;
        padding: 22px 18px;
        border-bottom: 1px dashed rgba(0,0,0,0.15);
        align-items: center;
      }
      
      .exam-table td:last-child { 
        border-bottom: none; 
      }

      .exam-table td::before {
        content: attr(data-label);
        font-weight: 900;
        color: var(--dark-blue);
        font-size: 1.1rem;
        opacity: 0.9;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      
      .exam-table td::before::after {
        content: ":";
        margin-right: 8px;
      }

      .exam-table td > * { 
        text-align: right; 
      }

      /* وضع العداد في سطر كامل */
      .exam-table td[data-label="الحالة"] {
        grid-template-columns: 1fr;
        padding-top: 15px;
      }
      
      .exam-table td[data-label="الحالة"]::before { 
        display: none; 
      }

      .countdown {
        width: 100% !important;
        min-width: 0 !important;
        justify-content: flex-start !important;
        padding: 20px 24px;
        border-radius: 18px;
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
      }

      /* زر/لمسة لفتح شاشة اليوم */
      .open-daily {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
        width: 100%;
        margin-top: 15px;
        padding: 20px 24px;
        border-radius: 18px;
        background: var(--gradient-green);
        border: none;
        color: white;
        font-weight: 900;
        cursor: pointer;
        box-shadow: 0 15px 35px rgba(0,0,0,0.18);
        font-size: 1.1rem;
        transition: var(--transition);
      }
      
      .open-daily:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.25);
      }
      
      .open-daily:active { 
        transform: scale(0.98); 
      }
      
      .school-info {
        flex-direction: column;
        gap: 18px;
        padding: 20px;
      }
      
      .info-item {
        padding: 15px 18px;
      }
      
      .header-time-date {
        flex-direction: column;
        gap: 18px;
        padding: 20px;
      }
      
      .main-nav {
        gap: 20px;
      }
      
      .nav-btn {
        width: 100%;
        padding: 22px 25px;
        min-height: 65px;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .header-subtitle {
        font-size: 1.4rem;
      }
    }

    /* Modals */
    .modal {
      display: none;
      position: fixed;
      z-index: 9999;
      inset: 0;
      background: rgba(0,0,0,0.9);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      padding: 0;
      animation: fadeIn 0.4s ease-out;
      overflow: hidden;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .modal-content {
      background: var(--white);
      width: min(1000px, 100%);
      margin: 0 auto;
      border-radius: 0;
      padding: 35px;
      max-height: 100vh;
      overflow: auto;
      position: relative;
      box-shadow: 0 40px 80px rgba(0,0,0,0.5);
      animation: slideUp 0.5s ease-out;
      min-height: 100vh;
    }
    
    @keyframes slideUp {
      from { transform: translateY(100px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .close {
      position: sticky;
      top: 0;
      float: left;
      width: 55px;
      height: 55px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 2.2rem;
      cursor: pointer;
      background: rgba(0,0,0,0.1);
      color: var(--text-color);
      transition: var(--transition);
      z-index: 100;
      margin-bottom: 20px;
    }
    
    .close:hover { 
      color: var(--accent-blue); 
      background: rgba(44, 90, 160, 0.15);
      transform: rotate(90deg);
    }

    /* ✅ شاشة بيانات الاختبار اليومية - كاملة الشاشة */
    .daily-fullscreen .modal-content {
      width: 100%;
      height: 100vh;
      max-height: 100vh;
      border-radius: 0;
      padding: 0;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      background: linear-gradient(135deg, #e8f5e9 0%, #f1f8e9 100%);
      animation: none;
      margin: 0;
      box-shadow: none;
    }
    
    .daily-header {
      background: var(--gradient-header), url('https://d.top4top.io/p_36520q11g1.png') center/cover no-repeat;
      color: white;
      padding: 35px 30px;
      text-align: center;
      position: relative;
      overflow: hidden;
      border-bottom: 5px solid var(--gold-color);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
      min-height: 200px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      flex-shrink: 0;
    }
    
    .daily-header::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(26, 127, 92, 0.95) 0%, rgba(45, 155, 140, 0.95) 100%);
    }
    
    .daily-header-content {
      position: relative;
      z-index: 2;
      width: 100%;
      max-width: 1200px;
      padding: 0 20px;
    }
    
    .daily-main-title {
      font-size: clamp(2.5rem, 6vw, 3.5rem) !important;
      font-weight: 900;
      margin-bottom: 15px;
      text-shadow: 0 6px 25px rgba(0, 0, 0, 0.6);
      color: white;
      line-height: 1.2;
      letter-spacing: -0.5px;
      max-width: 100%;
      margin-left: auto;
      margin-right: auto;
    }
    
    .daily-sub-title {
      font-size: clamp(1.5rem, 3.5vw, 2.2rem);
      font-weight: 800;
      margin-bottom: 20px;
      color: var(--gold-color);
      opacity: 0.95;
      text-shadow: 0 2px 12px rgba(0, 0, 0, 0.4);
      line-height: 1.3;
    }
    
    .daily-year-info {
      font-size: clamp(1.1rem, 2.5vw, 1.3rem);
      font-weight: 600;
      background: rgba(255, 255, 255, 0.3);
      display: inline-block;
      padding: 12px 28px;
      border-radius: 50px;
      border: 2px solid rgba(255, 255, 255, 0.4);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      margin-top: 15px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }
    
    .header-divider {
      width: 180px;
      height: 6px;
      background: var(--gold-color);
      margin: 25px auto;
      border-radius: 3px;
      position: relative;
      overflow: hidden;
    }
    
    .header-divider::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 60px;
      height: 100%;
      background: white;
      animation: shine 2.5s infinite;
    }
    
    @keyframes shine {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(350%); }
    }
    
    .daily-body {
      flex: 1;
      padding: 30px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      width: 100%;
    }
    
    .exam-status-container {
      display: flex;
      justify-content: center;
      align-items: stretch;
      gap: 25px;
      margin-bottom: 35px;
      flex-wrap: wrap;
      width: 100%;
      max-width: 1100px;
    }
    
    .exam-day-display {
      font-size: 2.2rem;
      font-weight: 900;
      color: var(--dark-blue);
      display: flex;
      align-items: center;
      gap: 20px;
      padding: 25px 30px;
      background: white;
      border-radius: 22px;
      box-shadow: 0 15px 45px rgba(0, 0, 0, 0.15);
      border: 3px solid rgba(26, 127, 92, 0.2);
      flex: 1;
      min-width: 320px;
      justify-content: center;
      transition: var(--transition);
    }
    
    .exam-day-display:hover {
      transform: translateY(-8px);
      box-shadow: 0 22px 55px rgba(0, 0, 0, 0.2);
    }
    
    .exam-day-display i {
      color: var(--primary-green);
      font-size: 2rem;
    }
    
    .exam-status-badge {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 25px 30px;
      border-radius: 22px;
      font-weight: 900;
      font-size: 1.4rem;
      box-shadow: 0 15px 45px rgba(0, 0, 0, 0.2);
      flex: 1;
      min-width: 320px;
      justify-content: center;
      transition: var(--transition);
    }
    
    .exam-status-badge:hover {
      transform: translateY(-8px);
    }
    
    .exam-status-badge.upcoming {
      background: var(--gradient-green);
      color: white;
    }
    
    .exam-status-badge.active {
      background: linear-gradient(135deg, #e6b422 0%, #d4a017 100%);
      color: white;
      animation: pulse 2s infinite;
    }
    
    .exam-status-badge.finished {
      background: linear-gradient(135deg, #64748b 0%, #94a3b8 100%);
      color: white;
    }
    
    .exam-data-container {
      background: white;
      border-radius: 26px;
      box-shadow: 0 20px 55px rgba(0, 0, 0, 0.15);
      padding: 40px;
      border: 2px solid rgba(0, 0, 0, 0.12);
      margin: 0 auto;
      width: 100%;
      max-width: 1100px;
      position: relative;
      overflow: hidden;
    }
    
    .exam-data-container::before {
      content: "";
      position: absolute;
      top: 0;
      right: 0;
      width: 12px;
      height: 100%;
      background: var(--gradient-green);
    }
    
    .exam-subject {
      font-size: 2.8rem !important;
      font-weight: 900;
      color: var(--dark-blue);
      text-align: center;
      margin-bottom: 40px;
      padding-bottom: 30px;
      border-bottom: 5px dashed rgba(26, 127, 92, 0.25);
      line-height: 1.3;
    }
    
    .exam-details-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 35px;
      margin-bottom: 35px;
    }
    
    .exam-detail-item {
      background: linear-gradient(135deg, rgba(26, 127, 92, 0.1) 0%, rgba(45, 155, 140, 0.1) 100%);
      border-radius: 22px;
      padding: 35px 30px;
      border: 2px solid rgba(0, 0, 0, 0.1);
      transition: var(--transition);
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    
    .exam-detail-item:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 45px rgba(0, 0, 0, 0.15);
    }
    
    .exam-detail-item::before {
      content: "";
      position: absolute;
      top: 0;
      right: 0;
      width: 10px;
      height: 100%;
      background: var(--primary-green);
    }
    
    .detail-label {
      font-size: 1.2rem;
      font-weight: 800;
      color: var(--text-light);
      margin-bottom: 18px;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .detail-label i {
      color: var(--primary-green);
      font-size: 1.6rem;
    }
    
    .detail-value {
      font-size: 2rem !important;
      font-weight: 900;
      color: var(--dark-blue);
      line-height: 1.3;
      margin-bottom: 25px;
    }
    
    .countdown-container {
      grid-column: 1 / -1;
      margin-top: 25px;
    }
    
    .countdown-title {
      font-size: 1.8rem;
      font-weight: 900;
      color: var(--dark-blue);
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 18px;
      padding-bottom: 18px;
      border-bottom: 4px solid rgba(26, 127, 92, 0.2);
    }
    
    .countdown-title i {
      color: var(--accent-blue);
      font-size: 1.8rem;
    }
    
    .countdown-display {
      font-family: 'Tajawal', monospace;
      font-size: clamp(2.5rem, 5vw, 3.5rem) !important;
      font-weight: 900;
      padding: 35px 30px;
      border-radius: 22px;
      margin: 25px 0;
      background: linear-gradient(135deg, #f1f8e9 0%, #e8f5e9 100%);
      border: 5px solid rgba(26, 127, 92, 0.25);
      color: var(--dark-blue);
      text-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
      direction: ltr;
      letter-spacing: 1px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 30px;
      min-height: 160px;
      text-align: center;
      transition: var(--transition);
    }
    
    .countdown-display:hover {
      transform: translateY(-8px);
    }
    
    .countdown-display.upcoming {
      border-color: rgba(45, 155, 140, 0.6);
      color: var(--secondary-green);
      background: linear-gradient(135deg, rgba(45, 155, 140, 0.15) 0%, rgba(45, 155, 140, 0.1) 100%);
    }
    
    .countdown-display.active {
      border-color: rgba(230, 180, 34, 0.6);
      color: #b8941f;
      background: linear-gradient(135deg, rgba(230, 180, 34, 0.15) 0%, rgba(230, 180, 34, 0.1) 100%);
      animation: pulse-border 1.5s infinite;
    }
    
    .countdown-display.finished {
      border-color: rgba(100, 116, 139, 0.6);
      color: #64748b;
      background: linear-gradient(135deg, rgba(100, 116, 139, 0.15) 0%, rgba(100, 116, 139, 0.1) 100%);
    }
    
    .countdown-hint {
      font-size: 1.3rem;
      color: var(--text-light);
      text-align: center;
      margin-top: 20px;
      font-weight: 600;
      padding: 15px 22px;
      background: rgba(26, 127, 92, 0.1);
      border-radius: 14px;
      border: 2px solid rgba(26, 127, 92, 0.2);
    }
    
    @keyframes pulse-border {
      0% { border-color: rgba(230, 180, 34, 0.6); }
      50% { border-color: rgba(230, 180, 34, 0.9); }
      100% { border-color: rgba(230, 180, 34, 0.6); }
    }
    
    .close-daily-top {
      position: absolute;
      top: 25px;
      left: 25px;
      z-index: 100;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.3);
      color: white;
      font-size: 2rem;
      cursor: pointer;
      border: 3px solid rgba(255, 255, 255, 0.4);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      transition: var(--transition);
    }
    
    .close-daily-top:hover {
      background: rgba(44, 90, 160, 0.9);
      transform: rotate(90deg) scale(1.1);
    }
    
    .info-row {
      display: flex;
      align-items: flex-start;
      gap: 25px;
      padding: 25px;
      background: linear-gradient(135deg, rgba(248, 250, 252, 0.95) 0%, rgba(240, 248, 255, 0.95) 100%);
      border-radius: 20px;
      border: 2px solid rgba(26, 127, 92, 0.2);
      margin-bottom: 22px;
      transition: var(--transition);
    }
    
    .info-row:hover {
      transform: translateX(8px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    }
    
    .info-row i {
      color: var(--primary-green);
      font-size: 1.8rem;
      margin-top: 5px;
      flex-shrink: 0;
    }
    
    .info-row .label {
      font-weight: 900;
      color: var(--dark-blue);
      margin-bottom: 10px;
      font-size: 1.2rem;
    }
    
    .info-row .value {
      color: var(--text-color);
      font-weight: 500;
      line-height: 1.6;
      font-size: 1.1rem;
    }
    
    /* تحسينات للهواتف */
    @media (max-width: 768px) {
      .daily-header {
        padding: 30px 25px;
        min-height: 180px;
      }
      
      .daily-main-title {
        font-size: 2.2rem !important;
      }
      
      .daily-sub-title {
        font-size: 1.6rem;
      }
      
      .daily-year-info {
        font-size: 1.1rem;
        padding: 10px 22px;
      }
      
      .header-divider {
        width: 140px;
        height: 5px;
        margin: 20px auto;
      }
      
      .exam-status-container {
        flex-direction: column;
        gap: 20px;
        margin-bottom: 30px;
      }
      
      .exam-day-display {
        font-size: 2rem;
        padding: 22px 25px;
        width: 100%;
        min-width: unset;
      }
      
      .exam-status-badge {
        padding: 22px 25px;
        width: 100%;
        min-width: unset;
        font-size: 1.3rem;
      }
      
      .exam-data-container {
        padding: 30px 25px;
        margin-bottom: 25px;
        border-radius: 22px;
      }
      
      .exam-subject {
        font-size: 2.2rem !important;
        margin-bottom: 30px;
      }
      
      .exam-details-grid {
        grid-template-columns: 1fr;
        gap: 25px;
      }
      
      .exam-detail-item {
        padding: 30px 25px;
      }
      
      .detail-value {
        font-size: 1.8rem !important;
      }
      
      .countdown-title {
        font-size: 1.5rem;
      }
      
      .countdown-display {
        font-size: 2.2rem !important;
        padding: 30px 25px;
        min-height: 130px;
      }
      
      .close-daily-top {
        top: 20px;
        left: 20px;
        width: 50px;
        height: 50px;
        font-size: 1.8rem;
      }
      
      .countdown-hint {
        font-size: 1.2rem;
        padding: 12px 18px;
      }
      
      .modal-content {
        padding: 25px 20px;
      }
    }
    
    @media (max-height: 700px) {
      .daily-header {
        min-height: 170px;
        padding: 25px 30px;
      }
      
      .daily-main-title {
        font-size: 2rem !important;
      }
      
      .daily-sub-title {
        font-size: 1.4rem;
      }
      
      .exam-subject {
        font-size: 2rem !important;
      }
      
      .detail-value {
        font-size: 1.6rem !important;
      }
      
      .countdown-display {
        font-size: 2rem !important;
        padding: 25px 20px;
        min-height: 110px;
      }
    }
    
    /* تحسينات للشاشات الكبيرة */
    @media (min-width: 1200px) {
      .daily-body {
        padding: 40px;
      }
      
      .exam-data-container {
        padding: 50px;
      }
    }
    
    /* تأثيرات إضافية */
    .pulse-animation {
      animation: pulse 2s infinite;
    }
    
    .shine-effect {
      position: relative;
      overflow: hidden;
    }
    
    .shine-effect::after {
      content: "";
      position: absolute;
      top: -50%;
      left: -60%;
      width: 20%;
      height: 200%;
      background: rgba(255, 255, 255, 0.3);
      transform: rotate(30deg);
      transition: 0.6s;
    }
    
    .shine-effect:hover::after {
      left: 120%;
    }
    
    /* تخصيص شريط التمرير */
    ::-webkit-scrollbar {
      width: 10px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(26, 127, 92, 0.1);
      border-radius: 5px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--primary-green);
      border-radius: 5px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: var(--secondary-green);
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <div class="header-content">
        <!-- شعار المدرسة الإبداعي -->
        <div class="school-logo-header">
          <div class="logo-container">
            <img src="https://d.top4top.io/p_36520q11g1.png" alt="شعار مدرسة خولة بنت حكيم" class="logo-img">
            <div class="logo-text">
              <div class="logo-main-title">سلطنة عُمان - وزارة التربية والتعليم</div>
              <div class="logo-subtitle">المديرية العامة للتربية والتعليم بمحافظة ظفار</div>
              <div class="logo-details">مدرسة خولة بنت حكيم للتعليم الأساسي (الصفوف 9-12)</div>
            </div>
          </div>
        </div>

        <h1>نظام إدارة جدول امتحانات الدبلوم العام</h1>
        <div class="header-subtitle">العام الدراسي 2025/2026 - الفصل الدراسي الأول</div>
        <div class="header-meta">الدور الأول - امتحانات نهاية الفصل</div>

        <div class="school-info">
          <div class="info-item">
            <i class="fas fa-user-tie"></i>
            <span>مديرة المدرسة: أ.ليلى المسهلي</span>
          </div>
          <div class="info-item">
            <i class="fas fa-map-marker-alt"></i>
            <span>محافظة ظفار - سلطنة عُمان</span>
          </div>
          <div class="info-item">
            <i class="fas fa-phone"></i>
            <span>هاتف المدرسة: 23212367</span>
          </div>
        </div>

        <div class="header-time-date">
          <div class="header-time" id="currentTime"><i class="fas fa-clock"></i><span>--</span></div>
          <div class="header-date" id="currentDate"><i class="fas fa-calendar-alt"></i><span>--</span></div>
        </div>

        <div class="main-nav">
          <button class="nav-btn instructions-btn shine-effect" id="instructionsBtn"><i class="fas fa-info-circle"></i>تعليمات الاختبار</button>
          <button class="nav-btn dropdown-btn shine-effect" id="optionsBtn"><i class="fas fa-calendar-day"></i>بيانات الاختبار اليومية</button>
        </div>
      </div>
    </header>

    <div class="exam-table-container">
      <table class="exam-table">
        <thead>
          <tr>
            <th>اليوم</th>
            <th>التاريخ</th>
            <th>المادة</th>
            <th>وقت الامتحان</th>
            <th>الحالة</th>
          </tr>
        </thead>

        <tbody>
          <tr id="exam1">
            <td data-label="اليوم">الأربعاء</td>
            <td data-label="التاريخ">31/12/2025</td>
            <td data-label="المادة"><strong>اللغة العربية</strong></td>
            <td data-label="وقت الامتحان">8:00 صباحًا - 11:00 صباحًا</td>
            <td data-label="الحالة">
              <div class="countdown upcoming" id="countdown1">
                <span class="status-dot dot-upcoming"></span>
                <span class="countdown-text">--</span>
              </div>
              <button class="open-daily shine-effect" onclick="openDailyForId(1)"><i class="fas fa-expand-alt"></i>عرض شاشة اليوم</button>
            </td>
          </tr>

          <tr id="exam2">
            <td data-label="اليوم">الخميس</td>
            <td data-label="التاريخ">1/1/2026</td>
            <td data-label="المادة"><strong>التربية الإسلامية</strong></td>
            <td data-label="وقت الامتحان">8:00 صباحًا - 11:00 صباحًا</td>
            <td data-label="الحالة">
              <div class="countdown upcoming" id="countdown2">
                <span class="status-dot dot-upcoming"></span>
                <span class="countdown-text">--</span>
              </div>
              <button class="open-daily shine-effect" onclick="openDailyForId(2)"><i class="fas fa-expand-alt"></i>عرض شاشة اليوم</button>
            </td>
          </tr>

          <tr class="holiday">
            <td>الجمعة</td>
            <td>2/1/2026</td>
            <td colspan="3"><strong><i class="fas fa-umbrella-beach"></i> إجازة نهاية الأسبوع</strong></td>
          </tr>

          <tr class="holiday">
            <td>السبت</td>
            <td>3/1/2026</td>
            <td colspan="3"><strong><i class="fas fa-umbrella-beach"></i> إجازة نهاية الأسبوع</strong></td>
          </tr>

          <tr id="exam3">
            <td data-label="اليوم">الأحد</td>
            <td data-label="التاريخ">4/1/2026</td>
            <td data-label="المادة"><strong>الرياضيات الأساسية / الرياضيات المتقدمة</strong></td>
            <td data-label="وقت الامتحان">8:00 صباحًا - 11:00 صباحًا</td>
            <td data-label="الحالة">
              <div class="countdown upcoming" id="countdown3">
                <span class="status-dot dot-upcoming"></span>
                <span class="countdown-text">--</span>
              </div>
              <button class="open-daily shine-effect" onclick="openDailyForId(3)"><i class="fas fa-expand-alt"></i>عرض شاشة اليوم</button>
            </td>
          </tr>

          <tr id="exam4">
            <td data-label="اليوم">الاثنين</td>
            <td data-label="التاريخ">5/1/2026</td>
            <td data-label="المادة"><strong>التاريخ (العالم من حولي)</strong></td>
            <td data-label="وقت الامتحان">8:00 صباحًا - 11:00 صباحًا</td>
            <td data-label="الحالة">
              <div class="countdown upcoming" id="countdown4">
                <span class="status-dot dot-upcoming"></span>
                <span class="countdown-text">--</span>
              </div>
              <button class="open-daily shine-effect" onclick="openDailyForId(4)"><i class="fas fa-expand-alt"></i>عرض شاشة اليوم</button>
            </td>
          </tr>

          <tr id="exam5">
            <td data-label="اليوم">الثلاثاء</td>
            <td data-label="التاريخ">6/1/2026</td>
            <td data-label="المادة"><strong>الكيمياء</strong></td>
            <td data-label="وقت الامتحان">8:00 صباحًا - 11:00 صباحًا</td>
            <td data-label="الحالة">
              <div class="countdown upcoming" id="countdown5">
                <span class="status-dot dot-upcoming"></span>
                <span class="countdown-text">--</span>
              </div>
              <button class="open-daily shine-effect" onclick="openDailyForId(5)"><i class="fas fa-expand-alt"></i>عرض شاشة اليوم</button>
            </td>
          </tr>

          <tr id="exam6">
            <td data-label="اليوم">الأربعاء</td>
            <td data-label="التاريخ">7/1/2026</td>
            <td data-label="المادة"><strong>الجغرافيا والتقنيات الحديثة</strong></td>
            <td data-label="وقت الامتحان">8:00 صباحًا - 11:00 صباحًا</td>
            <td data-label="الحالة">
              <div class="countdown upcoming" id="countdown6">
                <span class="status-dot dot-upcoming"></span>
                <span class="countdown-text">--</span>
              </div>
              <button class="open-daily shine-effect" onclick="openDailyForId(6)"><i class="fas fa-expand-alt"></i>عرض شاشة اليوم</button>
            </td>
          </tr>

          <tr id="exam7">
            <td data-label="اليوم">الخميس</td>
            <td data-label="التاريخ">8/1/2026</td>
            <td data-label="المادة"><strong>الأحياء</strong></td>
            <td data-label="وقت الامتحان">8:00 صباحًا - 11:00 صباحًا</td>
            <td data-label="الحالة">
              <div class="countdown upcoming" id="countdown7">
                <span class="status-dot dot-upcoming"></span>
                <span class="countdown-text">--</span>
              </div>
              <button class="open-daily shine-effect" onclick="openDailyForId(7)"><i class="fas fa-expand-alt"></i>عرض شاشة اليوم</button>
            </td>
          </tr>

          <tr class="holiday">
            <td>الجمعة</td>
            <td>9/1/2026</td>
            <td colspan="3"><strong><i class="fas fa-umbrella-beach"></i> إجازة نهاية الأسبوع</strong></td>
          </tr>

          <tr class="holiday">
            <td>السبت</td>
            <td>10/1/2026</td>
            <td colspan="3"><strong><i class="fas fa-umbrella-beach"></i> إجازة نهاية الأسبوع</strong></td>
          </tr>

          <tr id="exam8">
            <td data-label="اليوم">الأحد</td>
            <td data-label="التاريخ">11/1/2026</td>
            <td data-label="المادة"><strong>الفيزياء</strong></td>
            <td data-label="وقت الامتحان">8:00 صباحًا - 11:00 صباحًا</td>
            <td data-label="الحالة">
              <div class="countdown upcoming" id="countdown8">
                <span class="status-dot dot-upcoming"></span>
                <span class="countdown-text">--</span>
              </div>
              <button class="open-daily shine-effect" onclick="openDailyForId(8)"><i class="fas fa-expand-alt"></i>عرض شاشة اليوم</button>
            </td>
          </tr>

          <tr id="exam9">
            <td data-label="اليوم">الإثنين</td>
            <td data-label="التاريخ">12/1/2026</td>
            <td data-label="المادة"><strong>العلوم والبيئة</strong></td>
            <td data-label="وقت الامتحان">8:00 صباحًا - 11:00 صباحًا</td>
            <td data-label="الحالة">
              <div class="countdown upcoming" id="countdown9">
                <span class="status-dot dot-upcoming"></span>
                <span class="countdown-text">--</span>
              </div>
              <button class="open-daily shine-effect" onclick="openDailyForId(9)"><i class="fas fa-expand-alt"></i>عرض شاشة اليوم</button>
            </td>
          </tr>

          <tr id="exam10">
            <td data-label="اليوم">الثلاثاء</td>
            <td data-label="التاريخ">13/1/2026</td>
            <td data-label="المادة"><strong>اللغة الإنجليزية</strong></td>
            <td data-label="وقت الامتحان">8:00 صباحًا - 11:00 صباحًا</td>
            <td data-label="الحالة">
              <div class="countdown upcoming" id="countdown10">
                <span class="status-dot dot-upcoming"></span>
                <span class="countdown-text">--</span>
              </div>
              <button class="open-daily shine-effect" onclick="openDailyForId(10)"><i class="fas fa-expand-alt"></i>عرض شاشة اليوم</button>
            </td>
          </tr>

          <tr id="exam11">
            <td data-label="اليوم">الأربعاء</td>
            <td data-label="التاريخ">14/1/2026</td>
            <td data-label="المادة"><strong>الدراسات الاجتماعية (هذا وطني)</strong></td>
            <td data-label="وقت الامتحان">8:00 صباحًا - 11:00 صباحًا</td>
            <td data-label="الحالة">
              <div class="countdown upcoming" id="countdown11">
                <span class="status-dot dot-upcoming"></span>
                <span class="countdown-text">--</span>
              </div>
              <button class="open-daily shine-effect" onclick="openDailyForId(11)"><i class="fas fa-expand-alt"></i>عرض شاشة اليوم</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <footer>
      <p>سلطنة عُمان - وزارة التربية والتعليم</p>
      <p>المديرية العامة للتربية والتعليم بمحافظة ظفار</p>
      <p>مدرسة خولة بنت حكيم للتعليم الأساسي - الصفوف (9-12)</p>
      <p>مديرة المدرسة: <strong>أ. ليلى المسهلي</strong> | محافظة ظفار - سلطنة عُمان</p>
      <p>هاتف المدرسة: <strong>23212367</strong> | جميع الحقوق محفوظة &copy; 2025</p>
      <a href="https://wa.me/96823212367" target="_blank" class="whatsapp-link shine-effect">
        <i class="fab fa-whatsapp whatsapp-icon"></i>
        <span>التواصل مع المدرسة </span>
      </a>
    </footer>
  </div>

  <!-- Modal تعليمات الاختبار -->
  <div id="instructionsModal" class="modal" role="dialog" aria-labelledby="instructionsTitle" aria-modal="true">
    <div class="modal-content">
      <span class="close" aria-label="إغلاق النافذة">&times;</span>
      <h2 id="instructionsTitle" style="text-align:center;color:var(--dark-blue);margin-bottom:30px;font-size:2.5rem;border-bottom:4px solid var(--accent-blue);padding-bottom:20px;">تعليمات الاختبار الرسمية</h2>
      
      <div style="background:linear-gradient(135deg, rgba(44, 90, 160, 0.12) 0%, rgba(26, 127, 92, 0.12) 100%);padding:25px;border-radius:22px;margin-bottom:30px;border-right:5px solid var(--accent-blue);">
        <h3 style="color:var(--accent-blue);margin-bottom:20px;font-size:1.6rem;"><i class="fas fa-exclamation-circle"></i> تعليمات هامة لجميع الطالبات</h3>
        <p style="color:var(--text-color);font-weight:600;font-size:1.2rem;line-height:1.6;">يرجى الاطلاع على التعليمات التالية بعناية والالتزام بها لضمان سير الاختبارات بسلاسة ونجاح جميع الطلاب. هذه التعليمات صادرة عن وزارة التربية والتعليم.</p>
      </div>
      
      <div style="display:grid;gap:22px;max-height:70vh;overflow-y:auto;padding-right:15px;">
        <div class="info-row">
          <i class="fas fa-user-tie"></i>
          <div>
            <div class="label">الزي الرسمي المدرسي</div>
            <div class="value">الالتزام الكامل بالزي المدرسي الموحد للطالبات وفق اللوائح المدرسية</div>
          </div>
        </div>
        
        <div class="info-row">
          <i class="fas fa-tools"></i>
          <div>
            <div class="label">الأدوات اللازمة للامتحان</div>
            <div class="value">إحضار جميع الأدوات اللازمة لأداء الامتحان: الأقلام (أزرق، أسود، رصاص)، المسطرة، الممحاة، الآلة الحاسبة المسموح بها، أدوات الهندسة، وأي أدوات خاصة بالمادة</div>
          </div>
        </div>
        
        <div class="info-row">
          <i class="fas fa-mobile-alt"></i>
          <div>
            <div class="label">الأجهزة الإلكترونية الممنوعة</div>
            <div class="value">يمنع منعًا باتًا إدخال الهواتف النقالة، الأجهزة الذكية، الساعات الإلكترونية، السماعات، أدوات التصوير، أجهزة التسجيل، أو أي أدوات إلكترونية غير مصرح بها داخل القاعة</div>
          </div>
        </div>
        
        <div class="info-row">
          <i class="fas fa-ban"></i>
          <div>
            <div class="label">الأدوات الحادة والممنوعة</div>
            <div class="value">يحظر إدخال الأسلحة، الأدوات الحادة، المواد الخطرة، أو أي أدوات قد تشكل خطراً على السلامة العامة داخل المركز الامتحاني. سيتم مصادرة أي أدوات ممنوعة</div>
          </div>
        </div>
        
        <div class="info-row">
          <i class="fas fa-id-card"></i>
          <div>
            <div class="label">بطاقة الهوية الرسمية</div>
            <div class="value">على كل طالبة إحضار بطاقة الهوية الشخصية أو جواز السفر أو رخصة القيادة أو البطاقة المدرسية كإثبات للهوية. بدون هوية لا يسمح بدخول القاعة</div>
          </div>
        </div>
        
        <div class="info-row">
          <i class="fas fa-clock"></i>
          <div>
            <div class="label">مواعيد الحضور والانصراف</div>
            <div class="value">الحضور قبل نصف ساعة على الأقل من بدء الامتحان، والتواجد في القاعة قبل 10 دقائق من البدء. لا يسمح بالمغادرة قبل انقضاء ثلاثة أرباع زمن الاختبار إلا في حالات الضرورة القصوى</div>
          </div>
        </div>
        
        <div class="info-row">
          <i class="fas fa-door-open"></i>
          <div>
            <div class="label">قواعد الدخول والخروج</div>
            <div class="value">لا يسمح بالدخول إلى القاعة بعد مرور 15 دقيقة من بدء الوقت إلا بإذن من رئيس المركز. في حال التأخير، يحرم الطالب من دخول القاعة إلا بتقرير طبي معتمد</div>
          </div>
        </div>
        
        <div class="info-row">
          <i class="fas fa-calculator"></i>
          <div>
            <div class="label">الآلات الحاسبة المسموحة</div>
            <div class="value">يسمح بالآلات الحاسبة العلمية العادية فقط، التي لا تكون قابلة للبرمجة والتخزين. يمنع استخدام الآلات الحاسبة الرسومية أو المبرمجة أو التي تحتوي على ذاكرة تخزين</div>
          </div>
        </div>
        
        <div class="info-row">
          <i class="fas fa-pen"></i>
          <div>
            <div class="label">أدوات الكتابة والتصحيح</div>
            <div class="value">استخدام الأقلام الجافة الزرقاء أو السوداء للإجابة، ويفضل استخدام قلم رصاص في الأسئلة الموضوعية. يمنع استخدام أقلام التصحيح (الوايت) على كراسة الإجابة نهائياً</div>
          </div>
        </div>
        
        <div class="info-row">
          <i class="fas fa-user-clock"></i>
          <div>
            <div class="label">التعليمات أثناء الامتحان</div>
            <div class="value">الالتزام بالهدوء التام، عدم التحدث مع الآخرين، رفع اليد لاستدعاء الملاحظ في حالة الحاجة للمساعدة، اتباع تعليمات المراقبات بدقة، وعدم القيام بأي تصرف يعكر صفو الامتحان</div>
          </div>
        </div>
      </div>
      
      <div style="margin-top:30px;padding:25px;background:linear-gradient(135deg, rgba(230, 180, 34, 0.18), rgba(44, 90, 160, 0.12));border-radius:22px;border:3px solid rgba(230, 180, 34, 0.35);">
        <p style="text-align:center;font-weight:900;color:var(--dark-blue);margin:0;font-size:1.3rem;line-height:1.7;">
          <i class="fas fa-graduation-cap" style="color:var(--gold-color);margin-left:15px;font-size:1.6rem;"></i>
          باسم أسرة مدرسة خولة بنت حكيم للتعليم الأساسي، نتمنى لجميع طالباتنا التوفيق والنجاح الباهر في امتحاناتهم، 
          ونسأل الله العلي القدير أن يوفق الجميع لما فيه الخير والفلاح والنجاح، وأن يحقق لكل طالبة أعلى الدرجات والتميز
          <i class="fas fa-graduation-cap" style="color:var(--gold-color);margin-right:15px;font-size:1.6rem;"></i>
        </p>
      </div>
    </div>
  </div>

  <!-- Modal الخيارات والإعدادات -->
  <div id="optionsModal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-content">
      <span class="close" aria-label="إغلاق">&times;</span>
      <h2 style="text-align:center;color:var(--dark-blue);font-weight:900;margin:20px 0 30px;font-size:2.5rem;border-bottom:4px solid var(--primary-green);padding-bottom:20px;">الخيارات والإعدادات</h2>

      <div style="display:grid;gap:22px;padding:0 15px;max-width:600px;margin:0 auto;">
        <button class="nav-btn instructions-btn shine-effect" onclick="openDailyForBest()" style="width:100%;padding:25px;font-size:1.3rem;">
          <i class="fas fa-calendar-day"></i>فتح شاشة اليوم الامتحاني
        </button>
        <button class="nav-btn dropdown-btn shine-effect" onclick="window.print()" style="width:100%;padding:25px;font-size:1.3rem;">
          <i class="fas fa-print"></i>طباعة جدول الامتحانات
        </button>
        <button class="nav-btn shine-effect" style="width:100%;padding:25px;font-size:1.3rem;background:linear-gradient(135deg, #e6b422 0%, #d4a017 100%);" onclick="closeModal(optionsModal)">
          <i class="fas fa-times"></i>إغلاق النافذة
        </button>
      </div>
      
      <div style="margin-top:40px;padding:25px;background:rgba(26, 127, 92, 0.08);border-radius:22px;border:2px solid rgba(26, 127, 92, 0.15);max-width:800px;margin-left:auto;margin-right:auto;">
        <h3 style="color:var(--primary-green);margin-bottom:20px;font-size:1.5rem;text-align:center;"><i class="fas fa-info-circle"></i> معلومات سريعة عن النظام</h3>
        <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));gap:20px;">
          <div style="display:flex;align-items:center;gap:15px;padding:15px;background:white;border-radius:16px;box-shadow:0 8px 25px rgba(0,0,0,0.08);">
            <i class="fas fa-school" style="color:var(--secondary-green);font-size:1.8rem;"></i>
            <div>
              <div style="font-weight:800;color:var(--dark-blue);">المدرسة</div>
              <div>خولة بنت حكيم للتعليم الأساسي</div>
            </div>
          </div>
          <div style="display:flex;align-items:center;gap:15px;padding:15px;background:white;border-radius:16px;box-shadow:0 8px 25px rgba(0,0,0,0.08);">
            <i class="fas fa-user-graduate" style="color:var(--gold-color);font-size:1.8rem;"></i>
            <div>
              <div style="font-weight:800;color:var(--dark-blue);">الصفوف</div>
              <div>من التاسع إلى الثاني عشر</div>
            </div>
          </div>
          <div style="display:flex;align-items:center;gap:15px;padding:15px;background:white;border-radius:16px;box-shadow:0 8px 25px rgba(0,0,0,0.08);">
            <i class="fas fa-calendar-alt" style="color:var(--accent-blue);font-size:1.8rem;"></i>
            <div>
              <div style="font-weight:800;color:var(--dark-blue);">الفصل الدراسي</div>
              <div>الأول - الدور الأول</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ✅ شاشة بيانات الاختبار اليومية - كاملة الشاشة -->
  <div id="dailyExamModal" class="modal daily-fullscreen" role="dialog" aria-modal="true">
    <div class="modal-content">
      <div class="close-daily-top shine-effect" onclick="closeModal(dailyExamModal)" aria-label="إغلاق الشاشة">
        <i class="fas fa-times"></i>
      </div>
      
      <div class="daily-header">
        <div class="daily-header-content">
          <div class="daily-main-title">امتحان دبلوم التعليم العام</div>
          <div class="daily-sub-title">سلطنة عُمان - وزارة التربية والتعليم</div>
          <div class="daily-sub-title">المديرية العامة للتربية والتعليم بمحافظة ظفار</div>
          <div class="header-divider"></div>
          <div class="daily-year-info">مدرسة خولة بنت حكيم للتعليم الأساسي - الصفوف (9-12) - العام الدراسي 2025/2026م</div>
        </div>
      </div>

      <div class="daily-body">
        <!-- حالة اليوم واليوم -->
        <div class="exam-status-container">
          <div class="exam-day-display shine-effect" id="dailyExamDay">
            <i class="fas fa-calendar-alt"></i>
            <span id="dailyDayText">--</span>
          </div>
          <div class="exam-status-badge upcoming shine-effect" id="dailyExamStatus">
            <i class="fas fa-circle" id="dailyStatusIcon"></i>
            <span id="dailyStatusText">--</span>
          </div>
        </div>

        <!-- ✅ بيانات الامتحان مع العد التنازلي المدمج -->
        <div class="exam-data-container">
          <div class="exam-subject" id="dailyExamSubject">--</div>
          
          <div class="exam-details-grid">
            <!-- اليوم والتاريخ -->
            <div class="exam-detail-item shine-effect">
              <div class="detail-label">
                <i class="fas fa-calendar-day"></i>
                اليوم والتاريخ
              </div>
              <div class="detail-value" id="dailyDayDate">--</div>
            </div>
            
            <!-- وقت الإجابة -->
            <div class="exam-detail-item shine-effect">
              <div class="detail-label">
                <i class="fas fa-clock"></i>
                وقت الإجابة
              </div>
              <div class="detail-value" id="dailyExamTime">--</div>
            </div>
            
            <!-- زمن الإجابة -->
            <div class="exam-detail-item shine-effect">
              <div class="detail-label">
                <i class="fas fa-stopwatch"></i>
                زمن الإجابة
              </div>
              <div class="detail-value" id="dailyExamDuration">--</div>
            </div>
            
            <!-- ✅ العد التنازلي كجزء من بيانات الامتحان -->
            <div class="countdown-container">
              <div class="countdown-title">
                <i class="fas fa-hourglass-half"></i>
                <span>العد التنازلي للامتحان</span>
              </div>
              <div class="countdown-display upcoming shine-effect" id="dailyCountdownDisplay">--</div>
              <div class="countdown-hint" id="dailyCountdownHint">--</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const instructionsModal = document.getElementById("instructionsModal");
    const optionsModal = document.getElementById("optionsModal");
    const dailyExamModal = document.getElementById("dailyExamModal");

    const instructionsBtn = document.getElementById("instructionsBtn");
    const optionsBtn = document.getElementById("optionsBtn");

    const closeEls = document.getElementsByClassName("close");

    // عناصر شاشة اليوم الجديدة
    const dailyDayText = document.getElementById("dailyDayText");
    const dailyDayDate = document.getElementById("dailyDayDate");
    const dailyExamSubject = document.getElementById("dailyExamSubject");
    const dailyExamTime = document.getElementById("dailyExamTime");
    const dailyExamDuration = document.getElementById("dailyExamDuration");
    const dailyExamStatus = document.getElementById("dailyExamStatus");
    const dailyStatusIcon = document.getElementById("dailyStatusIcon");
    const dailyStatusText = document.getElementById("dailyStatusText");
    const dailyCountdownHint = document.getElementById("dailyCountdownHint");
    const dailyCountdownDisplay = document.getElementById("dailyCountdownDisplay");

    // بيانات الامتحانات
    const exams = [
      { id: 1, day: "الأربعاء", date: "31/12/2025", subject: "اللغة العربية", time: "8:00 صباحًا - 11:00 صباحًا", start: new Date(2025, 11, 31, 8, 0, 0), end: new Date(2025, 11, 31, 11, 0, 0), duration: "3 ساعات" },
      { id: 2, day: "الخميس", date: "1/1/2026", subject: "التربية الإسلامية", time: "8:00 صباحًا - 11:00 صباحًا", start: new Date(2026, 0, 1, 8, 0, 0), end: new Date(2026, 0, 1, 11, 0, 0), duration: "3 ساعات" },
      { id: 3, day: "الأحد", date: "4/1/2026", subject: "الرياضيات الأساسية / الرياضيات المتقدمة", time: "8:00 صباحًا - 11:00 صباحًا", start: new Date(2026, 0, 4, 8, 0, 0), end: new Date(2026, 0, 4, 11, 0, 0), duration: "3 ساعات" },
      { id: 4, day: "الاثنين", date: "5/1/2026", subject: "التاريخ (العالم من حولي)", time: "8:00 صباحًا - 11:00 صباحًا", start: new Date(2026, 0, 5, 8, 0, 0), end: new Date(2026, 0, 5, 11, 0, 0), duration: "3 ساعات" },
      { id: 5, day: "الثلاثاء", date: "6/1/2026", subject: "الكيمياء", time: "8:00 صباحًا - 11:00 صباحًا", start: new Date(2026, 0, 6, 8, 0, 0), end: new Date(2026, 0, 6, 11, 0, 0), duration: "3 ساعات" },
      { id: 6, day: "الأربعاء", date: "7/1/2026", subject: "الجغرافيا والتقنيات الحديثة", time: "8:00 صباحًا - 11:00 صباحًا", start: new Date(2026, 0, 7, 8, 0, 0), end: new Date(2026, 0, 7, 11, 0, 0), duration: "3 ساعات" },
      { id: 7, day: "الخميس", date: "8/1/2026", subject: "الأحياء", time: "8:00 صباحًا - 11:00 صباحًا", start: new Date(2026, 0, 8, 8, 0, 0), end: new Date(2026, 0, 8, 11, 0, 0), duration: "3 ساعات" },
      { id: 8, day: "الأحد", date: "11/1/2026", subject: "الفيزياء", time: "8:00 صباحًا - 11:00 صباحًا", start: new Date(2026, 0, 11, 8, 0, 0), end: new Date(2026, 0, 11, 11, 0, 0), duration: "3 ساعات" },
      { id: 9, day: "الإثنين", date: "12/1/2026", subject: "العلوم والبيئة", time: "8:00 صباحًا - 11:00 صباحًا", start: new Date(2026, 0, 12, 8, 0, 0), end: new Date(2026, 0, 12, 11, 0, 0), duration: "3 ساعات" },
      { id: 10, day: "الثلاثاء", date: "13/1/2026", subject: "اللغة الإنجليزية", time: "8:00 صباحًا - 11:00 صباحًا", start: new Date(2026, 0, 13, 8, 0, 0), end: new Date(2026, 0, 13, 11, 0, 0), duration: "3 ساعات" },
      { id: 11, day: "الأربعاء", date: "14/1/2026", subject: "الدراسات الاجتماعية (هذا وطني)", time: "8:00 صباحًا - 11:00 صباحًا", start: new Date(2026, 0, 14, 8, 0, 0), end: new Date(2026, 0, 14, 11, 0, 0), duration: "3 ساعات" },
    ];

    function openModal(modal) {
      modal.style.display = "block";
      document.body.style.overflow = "hidden";
      document.documentElement.style.overflow = "hidden";
      // لمنع التمرير خلف المودال
      document.body.style.position = 'fixed';
      document.body.style.width = '100%';
    }
    
    function closeModal(modal) {
      modal.style.display = "none";
      document.body.style.overflow = "auto";
      document.documentElement.style.overflow = "auto";
      document.body.style.position = '';
      document.body.style.width = '';
      
      if (modal === dailyExamModal && window.__dailyInt) {
        clearInterval(window.__dailyInt);
      }
    }

    instructionsBtn.onclick = () => openModal(instructionsModal);
    optionsBtn.onclick = () => openModal(optionsModal);

    for (let i = 0; i < closeEls.length; i++) {
      closeEls[i].onclick = function() {
        if (this.closest('#instructionsModal')) closeModal(instructionsModal);
        if (this.closest('#optionsModal')) closeModal(optionsModal);
        if (this.closest('#dailyExamModal')) closeModal(dailyExamModal);
      };
    }

    window.onclick = (e) => {
      if (e.target === instructionsModal) closeModal(instructionsModal);
      if (e.target === optionsModal) closeModal(optionsModal);
      if (e.target === dailyExamModal) closeModal(dailyExamModal);
    };

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        closeModal(instructionsModal);
        closeModal(optionsModal);
        closeModal(dailyExamModal);
      }
    });

    function updateDateTime() {
      const now = new Date();
      const timeEl = document.querySelector("#currentTime span");
      const dateEl = document.querySelector("#currentDate span");

      let h = now.getHours();
      const ampm = h >= 12 ? "م" : "ص";
      h = h % 12; h = h ? h : 12;
      const m = String(now.getMinutes()).padStart(2, "0");
      const s = String(now.getSeconds()).padStart(2, "0");
      timeEl.textContent = `${h}:${m}:${s} ${ampm}`;

      const days = ["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"];
      const months = ["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];
      dateEl.textContent = `${days[now.getDay()]}، ${now.getDate()} ${months[now.getMonth()]} ${now.getFullYear()}`;
    }

    function formatDiff(ms) {
      const total = Math.max(0, ms);
      const days = Math.floor(total / (1000 * 60 * 60 * 24));
      const hours = Math.floor((total % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((total % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((total % (1000 * 60)) / 1000);
      
      if (days > 0) {
        return `${days} يوم ${hours} س ${minutes} د`;
      }
      if (hours > 0) {
        return `${hours} س ${minutes} د ${seconds} ث`;
      }
      return `${minutes} د ${seconds} ث`;
    }

    function setRowBadgeAndClass(exam, state) {
      const row = document.getElementById(`exam${exam.id}`);
      if (!row) return;

      row.classList.remove("exam-upcoming","exam-active","exam-finished");
      row.classList.add(`exam-${state}`);

      let badge = row.querySelector(".badge");
      if (!badge) {
        badge = document.createElement("div");
        badge.className = "badge";
        row.appendChild(badge);
      }
      badge.classList.remove("upcoming","active","finished");
      badge.classList.add(state);

      if (state === "upcoming") badge.textContent = "قادم";
      if (state === "active") badge.textContent = "الآن";
      if (state === "finished") badge.textContent = "انتهى";
    }

    function updateCountdowns() {
      const now = new Date();

      exams.forEach(exam => {
        const el = document.getElementById(`countdown${exam.id}`);
        const row = document.getElementById(`exam${exam.id}`);
        if (!el || !row) return;

        const text = el.querySelector(".countdown-text");
        const dot = el.querySelector(".status-dot");

        el.classList.remove("upcoming","active","finished");
        dot.classList.remove("dot-upcoming","dot-active","dot-finished");
        row.classList.remove("exam-active-row");

        if (now < exam.start) {
          const diff = exam.start - now;
          text.textContent = `يبدأ بعد: ${formatDiff(diff)}`;
          el.classList.add("upcoming");
          dot.classList.add("dot-upcoming");
          setRowBadgeAndClass(exam, "upcoming");
        } else if (now >= exam.start && now <= exam.end) {
          const diff = exam.end - now;
          text.textContent = `متبقي: ${formatDiff(diff)}`;
          el.classList.add("active");
          dot.classList.add("dot-active");
          row.classList.add("exam-active-row");
          setRowBadgeAndClass(exam, "active");
        } else {
          text.textContent = "انتهى";
          el.classList.add("finished");
          dot.classList.add("dot-finished");
          setRowBadgeAndClass(exam, "finished");
        }
      });
    }

    // ✅ شاشة اليوم: من زر كل بطاقة
    function openDailyForId(id) {
      const exam = exams.find(e => e.id === id);
      if (!exam) return;
      openDaily(exam);
    }

    // ✅ شاشة اليوم: أفضل اختيار (امتحان اليوم أو القادم)
    function openDailyForBest() {
      const now = new Date();
      const todayKey = `${now.getFullYear()}-${now.getMonth()}-${now.getDate()}`;
      const today = exams.find(ex => {
        const examKey = `${ex.start.getFullYear()}-${ex.start.getMonth()}-${ex.start.getDate()}`;
        return examKey === todayKey;
      });
      const next = exams.find(ex => now < ex.end);
      openDaily(today || next || exams[0]);
    }

    function computeState(exam, now) {
      if (now < exam.start) return "upcoming";
      if (now >= exam.start && now <= exam.end) return "active";
      return "finished";
    }

    function renderDaily(exam) {
      const now = new Date();
      const state = computeState(exam, now);

      // تحديث البيانات الأساسية
      dailyDayText.textContent = exam.day;
      dailyDayDate.textContent = `${exam.day} - ${exam.date}`;
      dailyExamSubject.textContent = exam.subject;
      dailyExamTime.textContent = exam.time;
      dailyExamDuration.textContent = exam.duration;
      
      // تحديث حالة الامتحان
      dailyExamStatus.classList.remove("upcoming","active","finished");
      dailyExamStatus.classList.add(state);
      
      const statusLabel = state === "upcoming" ? "قادم" : state === "active" ? "الآن" : "انتهى";
      dailyStatusText.textContent = statusLabel;
      dailyStatusIcon.className = state === "active" ? "fas fa-play-circle" : "fas fa-circle";

      // تحديث العداد التنازلي
      dailyCountdownDisplay.classList.remove("upcoming","active","finished");
      dailyCountdownDisplay.classList.add(state);

      if (state === "upcoming") {
        dailyCountdownHint.textContent = "العد التنازلي لبداية الامتحان";
      } else if (state === "active") {
        dailyCountdownHint.textContent = "العد التنازلي لنهاية الامتحان";
      } else {
        dailyCountdownHint.textContent = "انتهى وقت الامتحان";
      }
    }

    function tickDaily(exam) {
      const now = new Date();
      const state = computeState(exam, now);

      if (state === "upcoming") {
        dailyCountdownDisplay.textContent = `يبدأ بعد: ${formatDiff(exam.start - now)}`;
      } else if (state === "active") {
        dailyCountdownDisplay.textContent = `متبقي: ${formatDiff(exam.end - now)}`;
      } else {
        dailyCountdownDisplay.textContent = "انتهى";
      }

      // تحديث الحالة بصرياً إذا تغيرت
      const pillState = dailyExamStatus.classList.contains("active") ? "active" :
                       dailyExamStatus.classList.contains("upcoming") ? "upcoming" : "finished";
      if (pillState !== state) renderDaily(exam);
    }

    function openDaily(exam) {
      openModal(dailyExamModal);
      renderDaily(exam);
      tickDaily(exam);

      if (window.__dailyInt) clearInterval(window.__dailyInt);
      window.__dailyInt = setInterval(() => tickDaily(exam), 1000);
    }

    function init() {
      updateDateTime();
      updateCountdowns();
      setInterval(updateDateTime, 1000);
      setInterval(updateCountdowns, 1000);

      // افتراضي: جهّز شارات الهاتف للبطاقات
      exams.forEach(ex => setRowBadgeAndClass(ex, "upcoming"));
      
      // افتح شاشة اليوم تلقائياً إذا كان هناك امتحان نشط
      const now = new Date();
      const activeExam = exams.find(ex => now >= ex.start && now <= ex.end);
      if (activeExam) {
        setTimeout(() => openDaily(activeExam), 1000);
      }
    }

    document.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>

